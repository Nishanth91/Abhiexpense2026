<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Basic -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Expense 2026</title>

  <!-- PWA -->
  <meta name="theme-color" content="#0B0F14" />
  <link rel="manifest" href="./manifest.webmanifest" />
  <link rel="icon" href="./assets/icon-192.png" />
  <link rel="apple-touch-icon" href="./assets/icon-192.png" />

  <!-- Styles -->
  <link rel="stylesheet" href="./styles.css" />

  <!-- iOS PWA -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

  <!-- Prevent caching issues -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
</head>

<body>
  <div id="app" class="app">

    <!-- HEADER -->
    <header class="topbar">
      <div class="brand">
        <div class="logo"></div>
        <div>
          <div class="title">Expense 2026</div>
          <div class="subtitle">Abhi & Indhu • Dark Premium</div>
        </div>
      </div>

      <button id="syncBtn" class="ghost">Sync</button>
    </header>

    <!-- WHO SELECT -->
    <div class="seg">
      <button class="seg-btn active" data-who="abhi">Abhi</button>
      <button class="seg-btn" data-who="indhu">Indhu</button>
      <button class="seg-btn" data-who="joint">Joint</button>
    </div>

    <!-- MONTH BAR -->
    <section class="monthbar card">
      <button id="prevMonth" class="iconbtn">‹</button>
      <div id="monthLabel" class="monthlabel">January 2026</div>
      <button id="nextMonth" class="iconbtn">›</button>
    </section>

    <!-- TABS -->
    <nav class="tabs">
      <button class="tab active" data-tab="home">Home</button>
      <button class="tab" data-tab="txns">Transactions</button>
      <button class="tab" data-tab="insights">Insights</button>
    </nav>

    <!-- HOME -->
    <section id="view-home" class="view active">
      <section class="card">
        <div class="cardhead">
          <div class="h">This month</div>
        </div>
        <div id="totalsGrid" class="grid5"></div>
      </section>

      <section class="card">
        <div class="h">Net flow</div>
        <div id="netValue" class="netValue">0.00</div>
        <div class="muted">
          Salary − (Spend + Investment + CC Payment + Send to India)
        </div>
      </section>
    </section>

    <!-- TRANSACTIONS -->
    <section id="view-txns" class="view">
      <section class="card">
        <input id="searchBox" class="input" placeholder="Search notes or category" />
      </section>
      <section id="txnList" class="list"></section>
    </section>

    <!-- INSIGHTS -->
    <section id="view-insights" class="view">
      <section class="card">
        <div class="h">Insights</div>
        <canvas id="barChart" height="220"></canvas>
      </section>
    </section>

    <!-- FAB -->
    <button id="addBtn" class="fab">＋</button>

    <!-- MODAL -->
    <div id="modal" class="modal" aria-hidden="true">
      <div class="sheet">
        <div class="sheethead">
          <div class="h">Add Entry</div>
          <button id="closeModal" class="iconbtn">✕</button>
        </div>

        <div class="sheetbody">
          <label class="lbl">Amount</label>
          <input id="amount" class="input big" placeholder="0.00" />

          <label class="lbl">Notes</label>
          <input id="notes" class="input" placeholder="rent, hydro, costco…" />

          <label class="lbl">Category</label>
          <input id="category" class="input" placeholder="Misc" />

          <button id="saveBtn" class="primary">Save</button>
        </div>
      </div>
    </div>

  </div>

  <!-- Scripts (ORDER MATTERS) -->
  <script src="./idb.js"></script>
  <script src="./app.js"></script>

  <!-- Service Worker -->
  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("./sw.js");
    }
  </script>

</body>
</html>
